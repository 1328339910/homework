<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理页</title>
    <style>
        /* 页面的整体布局 */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f0f2f5;
        }

        a {
            text-decoration: none;
            color: #333;
        }

        .header,
        .sidebar,
        .content {
            padding: 20px;
        }

        .header {
            background: #ffffff;
            border-bottom: 1px solid #dddddd;
            padding-bottom: 10px;
            height: 80px;
            width: auto;
            clear: left;
            position: relative;
            display: flex;
            justify-content: space-between;
            /* 分散对齐子元素 */
            align-items: center;
            /* 垂直居中对齐 */
            padding-right: 50px;
            /* 右边内边距 */
        }

        .sidebar {
            background: #ffffff;
            float: left;
            margin-right: 20px;
            width: 200px;
            height: 80vh;
            margin-right: 20px;
            float: none;
            text-align: center;
        }

        .content {
            background: #ffffff;
            overflow: hidden;
            padding: 20px 40px;
            display: flex;
            flex-grow: 1;
            height: 80vh;
        }

        .main-container {
            display: flex;
        }

        .headerNeiRong p {
            width: auto;
            height: auto;
            font-size: 20px;
        }

        /* 边栏的样式 */
        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar ul li {
            padding: 10px;
            border-bottom: 1px solid #dddddd;
        }

        .sidebar ul li a {
            padding: 10px;
            border-bottom: 1px solid #dddddd;
        }

        #logo {
            width: 100px;
            height: 100px;
        }

        .headerNeiRong {
            display: flex;
            justify-content: right;
            align-items: center;
            padding-right: 50px;
            position: absolute;
            right: 30px;
        }

        .headerNeiRong p {
            padding-right: 20px;
        }

        /*这个是对用户下拉菜单的样式控制*/
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 100px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }

        /* 显示下拉菜单 */
        .show {
            display: block;
        }

        /*用户下拉菜单的样式到这截止*/

        /* 以下是对中部主要内容的样式控制 */
        .component {
            cursor: pointer;
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px;
            width: 200px;
            height: 300px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        /* 以下是对点击悬浮框的样式控制 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            position: relative;
        }

        .closeBtn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 32px;
        }
    </style>
</head>

<body>
    <!-- 顶栏 -->
    <div class="header">
        <div id="logo">
            <img id="logo" src="./img/logo.png" alt="">
        </div>
        <div class="headerNeiRong">
            <p>首页</p>
            <div>
                <p id="user" style="text-shadow:3px 3px 3px blue;color: lightblue;">管理员</p>
                <div id="dropdownMenu" class="dropdown-content">
                    <a href="#">退出登录</a>
                    <!-- <a href="#">可以多加但是没想到要加什么</a> -->
                </div>
            </div>
        </div>
    </div>

    <!-- 主体内容区域 -->
    <div class="main-container">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <ul>
                <li style="color: rgb(64, 158, 255); font-size: 26px;">起始页</li>
                <li><a href="./生产管理.html">生产管理</a></li>
                <li><a href="#">人事管理</a></li>
                <li><a href="#">考勤管理</a></li>
                <li>待定</li>
                <li>待定</li>
            </ul>
        </div>

        <!-- 中部主要内容 -->
        <div class="content">
            <!-- 主内容区域 -->
            <div class="component" style="background-image: url(./img/车架.png);">
                <p>车架</p>
                <hr>
                <p id="bujian1">后续在这添加实时预览</p>
            </div>
            <div class="component" style="background-image: url(./img/前叉.png);">
                <p>前叉</p>
                <hr>
                <p id="bujian2">后续在这添加实时预览</p>
            </div>
            <div class="component" style="background-image: url(./img/车轮.png);">
                <p>车轮</p>
                <hr>
                <p id="bujian3">后续在这添加实时预览</p>
            </div>
            <div class="component" style="background-image: url(./img/传动装置.png);">
                <p>传动装置</p>
                <hr>
                <p id="bujian4">后续在这添加实时预览</p>
            </div>
            <div class="component" style="background-image: url(./img/刹车系统.png);">
                <p>刹车系统</p>
                <hr>
                <p id="bujian5">后续在这添加实时预览</p>
            </div>
            <div class="component" style="background-image: url(./img/车座.png);">
                <p>座椅和座杆</p>
                <hr>
                <p id="bujian6">后续在这添加实时预览</p>
            </div>
            <!-- 后续添加更多部件...... -->
        </div>

        <!-- 以下是悬浮框盒子 -->
        <div id="modal1" class="modal">
            <div class="modal-content">
                <span id="closeBtn1" class="closeBtn">&times;</span>
                <p style="font-size: 26px;color: rgb(250, 159, 83);">车架</p>
                <hr>
                <p style="cursor: pointer;"><a href="./生产管理.html?part=车架">1号生产线离线（未开始生产）</a></p>
            </div>
        </div>
        <div id="modal2" class="modal">
            <div class="modal-content">
                <span id="closeBtn2" class="closeBtn">&times;</span>
                <p style="font-size: 26px;color: rgb(139, 211, 185);">前叉</p>
                <hr>
                <p style="cursor: pointer;"><a href="./生产管理.html?person=蔡徐坤">蔡徐坤不在岗位！！！</a></p>
            </div>
        </div>
        <div id="modal3" class="modal">
            <div class="modal-content">
                <span id="closeBtn3" class="closeBtn">&times;</span>
                <p style="font-size: 26px;color: rgb(0, 114, 165);">车轮</p>
                <hr>
                <p style="cursor: pointer;"><a href="./生产管理.html">待定待定待定待定待定</a></p>
            </div>
        </div>
        <div id="modal4" class="modal">
            <div class="modal-content">
                <span id="closeBtn4" class="closeBtn">&times;</span>
                <p style="font-size: 26px;color: rgb(9, 63, 76);">传动装置</p>
                <hr>
                <p style="cursor: pointer;">待定待定待定待定待定</p>
            </div>
        </div>
        <div id="modal5" class="modal">
            <div class="modal-content">
                <span id="closeBtn5" class="closeBtn">&times;</span>
                <p style="font-size: 26px;color: rgb(141, 184, 178);">刹车系统</p>
                <hr>
                <p style="cursor: pointer;">待定待定待定待定待定</p>
            </div>
        </div>
        <div id="modal6" class="modal">
            <div class="modal-content">
                <span id="closeBtn6" class="closeBtn">&times;</span>
                <p style="font-size: 26px;color: rgb(1, 67, 113);">座椅和座杆</p>
                <hr>
                <p style="cursor: pointer;">待定待定待定待定待定</p>
            </div>
        </div>



        <script>
            // 以下是对用户名区域点击事件的调控
            // 点击时显示下拉菜单
            document.getElementById("user").onclick = function () {
                document.getElementById("dropdownMenu").classList.toggle("show");
            }


            // 点击下拉菜单外的区域时隐藏菜单
            window.onclick = function (event) {
                if (!event.target.matches('#user')) {
                    var dropdowns = document.getElementsByClassName("dropdown-content");
                    for (var i = 0; i < dropdowns.length; i++) {
                        var openDropdown = dropdowns[i];
                        if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                        }
                    }
                }
            }
            // 对用户名区域的控制到此为止

            // 以下是对部件点击唤起悬浮框事件的控制
            // 部件一
            document.getElementById('bujian1').addEventListener('click', function () {
                document.getElementById('modal1').style.display = 'block';
            });
            // 部件一关闭按钮
            document.getElementById('closeBtn1').addEventListener('click', function () {
                document.getElementById('modal1').style.display = 'none';
            });
            // 部件二
            document.getElementById('bujian2').addEventListener('click', function () {
                document.getElementById('modal2').style.display = 'block';
            });
            // 部件二关闭按钮
            document.getElementById('closeBtn2').addEventListener('click', function () {
                document.getElementById('modal2').style.display = 'none';
            });
            // 部件三
            document.getElementById('bujian3').addEventListener('click', function () {
                document.getElementById('modal3').style.display = 'block';
            });
            // 部件三关闭按钮
            document.getElementById('closeBtn3').addEventListener('click', function () {
                document.getElementById('modal3').style.display = 'none';
            });
            // 部件四
            document.getElementById('bujian4').addEventListener('click', function () {
                document.getElementById('modal4').style.display = 'block';
            });
            // 部件四关闭按钮
            document.getElementById('closeBtn4').addEventListener('click', function () {
                document.getElementById('modal4').style.display = 'none';
            });
            // 部件五
            document.getElementById('bujian5').addEventListener('click', function () {
                document.getElementById('modal5').style.display = 'block';
            });
            // 部件五关闭按钮
            document.getElementById('closeBtn5').addEventListener('click', function () {
                document.getElementById('modal5').style.display = 'none';
            });
            // 部件六
            document.getElementById('bujian6').addEventListener('click', function () {
                document.getElementById('modal6').style.display = 'block';
            });
            // 部件六关闭按钮
            document.getElementById('closeBtn6').addEventListener('click', function () {
                document.getElementById('modal6').style.display = 'none';
            });

            // 别骂我我不是没有试过用getelementsbyclassname遍历但是出了好多问题没办法我受不了了


            // 中部部件盒子拖动
            // 获取元素，类名：component
            var components = document.getElementsByClassName("component");

            var active = false; // 当前是否正在拖动
            var currentX;
            var currentY;
            var initialX;
            var initialY;

            // 遍历所有component，给每个元素添加自己的偏移量属性
            for (var i = 0; i < components.length; i++) {
                var component = components[i];
                component.xOffset = 0;
                component.yOffset = 0;
                component.addEventListener("mousedown", dragStart, false);
            }

            window.addEventListener("mousemove", drag, false);
            window.addEventListener("mouseup", dragEnd, false);

            function dragStart(e) {
                // 找到当前活动的component
                var activeComponent = e.target;

                // 检查事件目标是否是一个component
                if (activeComponent.classList.contains("component")) {
                    // 初始化拖动的起始位置
                    initialX = e.clientX - activeComponent.xOffset;
                    initialY = e.clientY - activeComponent.yOffset;

                    active = true; // 激活拖动状态
                    activeComponent.classList.add("active"); // 标记当前拖动的元素
                }
            }

            function dragEnd(e) {
                var activeComponent = document.querySelector(".component.active");
                if (activeComponent) {
                    // 更新偏移量
                    activeComponent.xOffset = currentX;
                    activeComponent.yOffset = currentY;
                    activeComponent.classList.remove("active"); // 移除活动元素的标记
                }
                active = false; // 停止拖动
            }

            function drag(e) {
                if (active) {
                    e.preventDefault(); // 阻止默认事件

                    var activeComponent = document.querySelector(".component.active");

                    if (!activeComponent) return;

                    // 计算新位置
                    currentX = e.clientX - initialX;
                    currentY = e.clientY - initialY;

                    // 应用新位置
                    setTranslate(currentX, currentY, activeComponent);
                }
            }

            function setTranslate(xPos, yPos, el) {
                el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
            }
        </script>
</body>

</html>